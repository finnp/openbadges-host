<!DOCTYPE html>
<html lang="en">
  <head>
    <title>A badge for your</title>
    <script src="https://backpack.openbadges.org/issuer.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  </head>
  <body>
      <div class="container">
        <h1>You received a badge!</h1>
        <img id="badge-img" alt="Your badge" src="" class="img-responsive">
        <button id="backpack-add" class="btn btn-lg btn-primary">Add to your backpack</button>
      </div>
      <script>
        var baseUrl = 'http://www.finnpauls.de/openbadges-host/';
        var badgeID = window.location.hash.slice(1); // e.g. badge-example/1
        var url = baseUrl + badgeID + '.json';
        
        $.getJSON(url, function (data) {
          var badgeUrl = data.badge;
          $.getJSON(badgeUrl, function (badge) {
            $('#badge-img').attr('src', badge.image);
          })
        });
        
        console.log('Badge for: ' + url);
        $('#backpack-add').click(function() {
          OpenBadges.issue([url]);
        });
      </script>
  </body>
</html>

